<!DOCTYPE html>
<html>
<head>
  <title>Cinémas stéphanois</title>
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <link rel="shortcut icon" href="https://tse2.mm.bing.net/th?id=OIP.WYRZ5zlaZMMhsgGUwdl6gwHaFm&pid=Api">
  <style>
    .slider-container {
      position: relative;
      width: 100%;
      max-width: 800px;
      margin: auto;
    }

    .slides {
      display: none;
    }

    .slider-image {
      width: 100%;
      height: auto;
    }

    .slider-content {
      position: absolute;
      bottom: 20px;
      left: 20px;
      color: white;
      background-color: rgba(0, 0, 0, 0.5);
      padding: 15px;
      border-radius: 5px;
    }

    /* Control Buttons */
    .w3-button {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background-color: rgba(0,0,0,0.6);
      color: white;
    }

    .w3-button:hover {
      background-color: rgba(0,0,0,0.8);
    }

    .prev {
      left: 0;
    }

    .next {
      right: 0;
    }

    /* Add animation to the slides */
    .w3-animate-fading {
      animation: fading 2s infinite;
    }

    @keyframes fading {
      from { opacity: 0.4 }
      to { opacity: 1 }
    }
  </style>
</head>
<body>

  <div class="w3-center w3-green">
    <h1>Les cinémas stéphanois vous font voyager</h1>
  </div>

<div class="slider-container w3-content w3-display-container">
  <!-- Slide 1 -->
  <div class="slides w3-animate-fading">
    <img class="slider-image" src="https://fr.web.img5.acsta.net/c_310_420/img/f5/a1/f5a1012acb73bb38b4801fe371a54227.jpg" alt="Slide 1">
    <div class="slider-content w3-display-bottomleft">
      <h2>Joker : Folie à deux</h2>
      <p>A quelques jours de son procès pour les crimes commis sous les traits du Joker, Arthur Fleck rencontre le grand amour et se trouve entraîné dans une folie à deux.</p>
      <p>21h15 - Salle 1</p>
    </div>
  </div>

    <div class="slides w3-animate-fading">
    <img class="slider-image" src="https://tse3.mm.bing.net/th?id=OIP.0LjNd06GsQ591NBrqWEFbgHaKD&pid=Api" alt="Slide 1">
    <div class="slider-content w3-display-bottomleft">
      <h2>Monsieur Aznavour</h2>
      <p>La vie fantastique d'un grand musicien arménien</p>
      <p>21h15 - Salle 2</p>
    </div>
  </div>

      <div class="slides w3-animate-fading">
    <img class="slider-image" src="https://fr.web.img3.acsta.net/c_310_420/img/cd/e7/cde74f5fc87323a9daced58b9f1ceeb0.jpg" alt="Slide 1">
    <div class="slider-content w3-display-bottomleft">
      <h2>Le Monde à l'Envers</h2>
      <p>C’est la crise, tout s’arrête : plus d’eau, plus d’électricité, plus de réseau… Stanislas, homme d’affaire parisien, perd tout y compris sa fortune. Lui qui déteste la campagne est contraint de partir se réfugier avec sa femme et son fils dans une des exploitations agricoles qu’il avait acquise dans un but spéculatif. Mais à son arrivée, il se retrouve face à Patrick et sa famille, agriculteurs exploitants des lieux, qui n’ont pas l’intention de quitter la ferme… Dans cette atmosphère chaotique où tout est inversé, nos deux familles que tout oppose parviendront-elles à cohabiter pour survivre et peut-être reconstruire ensemble un nouveau monde ?</p>
      <p>21h15 - Salle 3</p>
    </div>
  </div>

  <div class="slides w3-animate-fading">
    <img class="slider-image" src="https://fr.web.img6.acsta.net/c_310_420/o_club-allocine-2024-310x420.png_0_se/img/29/eb/29eb8341475fdb0b19b1d7b995b70e17.jpg" alt="Slide 1">
    <div class="slider-content w3-display-bottomleft">
      <h2>Le Comte de Montecristo</h2>
      <p>Victime d’un complot, le jeune Edmond Dantès est arrêté le jour de son mariage pour un crime qu’il n’a pas commis. Après quatorze ans de détention au château d’If, il parvient à s’évader. Devenu immensément riche, il revient sous l’identité du comte de Monte-Cristo pour se venger des trois hommes qui l’ont trahi.</p>
      <p>21h00 - Salle 4</p>
    </div>
  </div>

  <div class="slides w3-animate-fading">
    <img class="slider-image" src="https://fr.web.img6.acsta.net/c_310_420/img/07/e1/07e1b5bcc39475583221142ad666ae1e.jpg" alt="Slide 1">
    <div class="slider-content w3-display-bottomleft">
      <h2>Bambi, la vie dans les bois</h2>
      <p>Les aventures d’un jeune faon, entouré de sa mère et des animaux de la forêt : son ami le corbeau, le lapin, le raton laveur… Il découvre le monde des arbres et leurs secrets. Chaque jour, sa mère l’éduque pour qu’il puisse grandir avec force. Mais l’automne arrivé, Bambi s’aventure en terrain découvert lorsque des chasseurs le séparent de sa mère à tout jamais. Dès lors, le jeune faon doit apprendre à vivre seul. Heureusement il retrouve Faline son amie d’enfance. Puis un grand et majestueux cerf, qui n’est autre que son père, va retrouver Bambi et l’aider à grandir. Ce dernier va alors prendre son destin en main.</p>
      <p>20h30 - Salle 5</p>
    </div>
  </div>

  <!-- Slide 2 -->
 
  <!-- Previous and Next buttons -->
  <button class="w3-button w3-display-left prev" onclick="plusDivs(-1)">&#10094;</button>
  <button class="w3-button w3-display-right next" onclick="plusDivs(1)">&#10095;</button>
</div>

<script>
  var slideIndex = 1;
  showDivs(slideIndex);

  function plusDivs(n) {
    showDivs(slideIndex += n);
  }

   setInterval(plusDivs(1), 5000);

  function showDivs(n) {
    var i;
    var x = document.getElementsByClassName("slides");
    if (n > x.length) { slideIndex = 1 }
    if (n < 1) { slideIndex = x.length }
    for (i = 0; i < x.length; i++) {
      x[i].style.display = "none";
    }
    x[slideIndex - 1].style.display = "block";
  }
</script>

   <div class="container w3-center w3-grey">
    <h1>Les salles en temps réel</h1>

    <div class="room" id="room-1">
      <h2>Salle 1 - Métare</h2>
      <div class="schedule" id="schedule-room-1">
        <div class="film">14:00 - Film A</div>
        <div class="film">16:30 - Film B</div>
        <div class="film">19:00 - Film C</div>
        <div class="film">21:15 - Joker : Folie à deux</div>
      </div>
      <div class="status" id="status-room-1"></div>
    </div>

    <div class="room" id="room-2">
      <h2>Salle 2 - Chavanelle</h2>
      <div class="schedule" id="schedule-room-2">
        <div class="film">13:00 - Film E</div>
        <div class="film">15:30 - Film F</div>
        <div class="film">18:00 - Film G</div>
        <div class="film">21:15 - Monsieur Aznavour</div>
      </div>
      <div class="status" id="status-room-2"></div>
    </div>

    <div class="room" id="room-3">
      <h2>Salle 3 - Châteaucreux</h2>
      <div class="schedule" id="schedule-room-3">
        <div class="film">12:00 - Film I</div>
        <div class="film">14:30 - Film J</div>
        <div class="film">17:00 - Film K</div>
        <div class="film">21:15 - Monde à l'Envers</div>
      </div>
      <div class="status" id="status-room-3"></div>
    </div>

    <div class="room" id="room-4">
      <h2>Salle 4 - Bellevue</h2>
      <div class="schedule" id="schedule-room-4">
        <div class="film">13:30 - Film M</div>
        <div class="film">16:00 - Film N</div>
        <div class="film">18:30 - Film O</div>
        <div class="film">21:00 - Le Comte de Montecristo</div>
      </div>
      <div class="status" id="status-room-4"></div>
    </div>

    <div class="room" id="room-5">
      <h2>Salle 5 - Saint-Priest</h2>
      <div class="schedule" id="schedule-room-5">
        <div class="film">12:30 - Film Q</div>
        <div class="film">15:00 - Film R</div>
        <div class="film">17:30 - Film S</div>
        <div class="film">20:30 - Bambi, la vie dans les bois</div>
      </div>
      <div class="status" id="status-room-5"></div>
    </div>

  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const rooms = [
        {
          id: "room-1",
          schedule: [
            { time: "14:00", title: "Film A" },
            { time: "16:30", title: "Film B" },
            { time: "19:00", title: "Film C" },
            { time: "21:15", title: "Joker : Folie à deux" }
          ]
        },
        {
          id: "room-2",
          schedule: [
            { time: "13:00", title: "Film E" },
            { time: "15:30", title: "Film F" },
            { time: "18:00", title: "Film G" },
            { time: "21:15", title: "Monsieur Aznavour" }
          ]
        },
        {
          id: "room-3",
          schedule: [
            { time: "12:00", title: "Film I" },
            { time: "14:30", title: "Film J" },
            { time: "17:00", title: "Film K" },
            { time: "21:15", title: "Le Monde à l'Envers" }
          ]
        },
        {
          id: "room-4",
          schedule: [
            { time: "13:30", title: "Film M" },
            { time: "16:00", title: "Film N" },
            { time: "18:30", title: "Film O" },
            { time: "21:00", title: "Film P" }
          ]
        },
        {
          id: "room-5",
          schedule: [
            { time: "12:30", title: "Film Q" },
            { time: "15:00", title: "Film R" },
            { time: "17:30", title: "Film S" },
            { time: "20:00", title: "Film T" }
          ]
        }
      ];

      function getMinutesUntilShow(time) {
        const [hour, minute] = time.split(":").map(Number);
        const showTime = new Date();
        showTime.setHours(hour, minute, 0, 0);

        const now = new Date();
        const differenceInMs = showTime - now;
        return Math.floor(differenceInMs / 60000); // Convertir en minutes
      }

      function updateRoomStatus(room) {
        const now = new Date();
        let currentShow = null;
        let nextShow = null;

        room.schedule.forEach((showtime, i) => {
          const minutesUntilShow = getMinutesUntilShow(showtime.time);

          if (minutesUntilShow <= 0 && minutesUntilShow > -120) {
            currentShow = showtime;
            document.getElementById(room.id).querySelectorAll('.film')[i].classList.add('current');
          } else if (minutesUntilShow > 0 && !nextShow) {
            nextShow = { ...showtime, minutesUntil: minutesUntilShow };
          }
        });

        const statusElement = document.getElementById(`status-${room.id}`);

        if (currentShow) {
          statusElement.innerHTML = `<span class="highlight">En cours : ${currentShow.title}</span>`;
        } else if (nextShow) {
          statusElement.innerHTML = `Prochaine séance : ${nextShow.title} dans ${nextShow.minutesUntil} minutes.`;
        } else {
          statusElement.innerHTML = "Pas de prochaines séances aujourd'hui.";
        }
      }

      function updateAllRooms() {
        rooms.forEach(room => {
          updateRoomStatus(room);
        });
      }

      updateAllRooms();
      setInterval(updateAllRooms, 60000); // Mise à jour toutes les minutes
    });
  </script>


</body>
</html>
